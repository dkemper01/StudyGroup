@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>

<div class="row">
    <div class="col-md-4">
        <h2>ASP.NET Session</h2>        
        @Html.Action("WatchSummary", "ExchangeRates", new { id = @Session["CurrencyId"]})
    </div>
    <div class="col-md-4">
        <h2>HTML5 Session Storage</h2>
        <div id="sessionStorage">
            <img src="~/Content/Images/wait.gif" />
        </div>
    </div>
    <div class="col-md-4">
        <h2>HTML5 Local Storage</h2>
        <div id="localStorage">
            <img src="~/Content/Images/wait.gif" />
        </div>
    </div>
</div>

@section scripts {
    <script>
        function loadWatchSummary(currencyId, target) {
            var url = "/ExchangeRates/WatchSummary/" + (currencyId || '');

            $.get(url, function(data) {
                $(target).html(data);
            });
        }

        $(document).ready(function () {
            loadWatchSummary(sessionStorage.getItem('currencyId'), $('#sessionStorage'));
            loadWatchSummary(localStorage.getItem('currencyId'), $('#localStorage'));
        });
    </script>
}
